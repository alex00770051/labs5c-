# Лабораторная работа №5
**Язык программирования:** C++  
**Студент:** Дорофеев Алексей, Ит-6
**Вариант: 4** Задания 1-6 по работе с файлами  

---

## Цель работы

Освоить принципы работы с файлами в C++, включая:
- Работу с бинарными и текстовыми файлами
- Обработку разных типов данных (числа, структуры, строки)
- Реализацию статических методов в классах
- Создание модульной архитектуры программы
- Обработку ошибок и безопасный ввод данных

---

## Задание 1

### Алгоритм решения:

1. **Создать статический класс BinaryProcessor**
   - Все методы реализовать как статические
   - Использовать паттерн "Utility Class"

2. **Реализовать методы для работы с бинарными файлами:**
   - `FillWithRandomNumbers()` - заполнение бинарного файла случайными числами
   - `ReadNumbers()` - чтение чисел из бинарного файла
   - `DisplayNumbers()` - отображение содержимого в десятичном виде

3. **Реализовать метод `Task1CountOppositePairs()`:**
   - Читает все числа из бинарного файла
   - Находит пары противоположных чисел (a и -a)
   - Использует двойной цикл для проверки всех возможных пар
   - Исключает пары с нулями (0 и 0)

4. **Добавить проверку корректности:**
   - Проверка существования файла
   - Обработка ошибок ввода/вывода
   - Автоматическое добавление расширения .bin

---

## Задание 2

### Алгоритм решения:

1. **Реализовать метод `Task2MatrixProcessing()`:**
   - Читает числа из бинарного файла
   - Определяет размер квадратной матрицы
   - Заполняет матрицу числами (остальные ячейки нулями)

2. **Алгоритм обработки матрицы:**
   - Находит максимальный элемент в каждом столбце
   - Заменяет все элементы столбца на максимальный
   - Создает новую матрицу с результатами

3. **Особенности реализации:**
   - Использование вложенных векторов для матрицы
   - Эффективный поиск максимумов по столбцам
   - Форматированный вывод матриц

---

## Задание 3

### Алгоритм решения:

1. **Создать структуру Luggage:**
   - `char item_name[50]` - название багажа
   - `double weight` - вес в кг

2. **Реализовать методы для работы со структурами:**
   - `FillWithRandomLuggage()` - заполнение случайными данными
   - `ReadLuggage()` - чтение структур из бинарного файла
   - `DisplayLuggage()` - табличный вывод содержимого

3. **Реализовать метод `Task3FindMassDifference()`:**
   - Находит самый тяжелый и самый легкий багаж
   - Вычисляет разницу между их массами
   - Использует алгоритмы `max_element` и `min_element`

---

## Задание 4

### Алгоритм решения:

1. **Реализовать методы для текстовых файлов (одно число в строке):**
   - `FillTextFileWithRandomNumbers()` - заполнение файла
   - `ReadNumbersFromTextFile()` - чтение чисел
   - `DisplayTextFileContent()` - отображение содержимого

2. **Реализовать метод `Task4CheckNoZero()`:**
   - Проверяет наличие нулей в файле
   - Возвращает `true` если нулей нет, `false` если есть
   - Показывает позиции найденных нулей

---

## Задание 5

### Алгоритм решения:

1. **Реализовать методы для текстовых файлов (несколько чисел в строке):**
   - `FillTextFileWithRandomNumbersMultiplePerLine()` - заполнение
   - `ReadNumbersFromTextFileMultiplePerLine()` - чтение с использованием `stringstream`
   - `DisplayTextFileContentMultiplePerLine()` - форматированный вывод

2. **Реализовать метод `Task5FindMaxElement()`:**
   - Находит максимальный элемент во всем файле
   - Показывает все позиции, где встречается максимум
   - Выводит дополнительную статистику

---

## Задание 6

### Алгоритм решения:

1. **Реализовать методы для работы со строками:**
   - `FillTextFileWithRandomStrings()` - генерация случайных строк
   - `DisplayTextFileLines()` - вывод строк с указанием последнего символа

2. **Реализовать метод `Task6CopyLinesEndingWithChar()`:**
   - Читает входной файл построчно
   - Проверяет последний символ каждой строки
   - Копирует строки, оканчивающиеся на заданный символ, в выходной файл
   - Выводит статистику обработки

---

## Структура программы

### Файлы проекта:
- **binary_processor.h** - заголовочный файл с объявлением класса
- **binary_processor.cpp** - реализация методов класса
- **main.cpp** - главная программа с меню

### Основные компоненты класса:

**Класс BinaryProcessor:**
- Все методы объявлены как `static`
- Запрещено создание экземпляров класса
- Вспомогательные приватные методы для работы с расширениями файлов

**Структура Luggage:**
- Фиксированный размер для бинарного хранения
- Конструктор для удобного создания объектов
- Безопасное копирование строк

**Методы обработки файлов:**
- Для бинарных файлов: работа с числами и структурами
- Для текстовых файлов: три разных формата (одно число/строка, несколько чисел, строки)
- Автоматическое добавление расширений (.bin, .txt)

---

## Реализация

### Особенности реализации:

**Использование статических методов:**
```cpp
class BinaryProcessor {
public:
    static void FillWithRandomNumbers(const std::string& filename, int count, 
                                     int min_val = -100, int max_val = 100);
    static int Task1CountOppositePairs(const std::string& filename);
    // ... все методы static
private:
    BinaryProcessor() = delete;  // Запрет создания экземпляров
};
```
**Алгоритм поиска противоположных пар (Задание 1):**
```cpp
for (size_t i = 0; i < numbers.size(); ++i) {
    for (size_t j = i + 1; j < numbers.size(); ++j) {
        if (numbers[i] != 0 && numbers[i] == -numbers[j]) {
            count++;
        }
    }
}
```

**Обработка матрицы (Задание 2):**
```cpp
// Нахождение максимумов в столбцах
for (int j = 0; j < n; ++j) {
    for (int i = 0; i < n; ++i) {
        if (matrix[i][j] > max_in_columns[j]) {
            max_in_columns[j] = matrix[i][j];
        }
    }
}
```

**Генерация случайных строк (Задание 6):**
```cpp
// Создание строки из 1-5 случайных слов
for (int j = 0; j < words_in_line; ++j) {
    line += sample_words[word_dist(gen)];
    if (j < words_in_line - 1) line += " ";
}
line += endings[end_dist(gen)];  // Добавление случайного окончания
```

---

## Тестирование

### Задание 1: Поиск противоположных пар
```
=== ЗАДАНИЕ 1: Поиск пар противоположных чисел ===
Пара 1: [0]=5 и [1]=-5
Пара 2: [2]=3 и [3]=-3
Пара 3: [4]=7 и [6]=-7
Всего пар противоположных чисел: 3
```

### Задание 2: Обработка матрицы
```
=== ЗАДАНИЕ 2: Обработка матрицы ===
Создание матрицы 3x3 из 6 чисел

Исходная матрица:
5   3   8
1   7   4
0   0   0

Столбец 0: максимум = 5
Столбец 1: максимум = 7
Столбец 2: максимум = 8

Матрица после замены столбцов на максимальные элементы:
5   7   8
5   7   8
5   7   8
```

### Задание 3: Разница масс багажа
```
=== ЗАДАНИЕ 3: Разница масс багажа ===
Багаж максимальной массы: 'корзина' - 30.20 кг
Багаж минимальной массы: 'кейс' - 3.70 кг
Разница: 26.50 кг
```

### Задание 4: Проверка отсутствия нуля
```
=== ЗАДАНИЕ 4: Проверка отсутствия нуля ===
Файл СОДЕРЖИТ нулевые значения!
Нули найдены в строках: 4
Результат: false
```

### Задание 5: Поиск максимального элемента
```
=== ЗАДАНИЕ 5: Поиск максимального элемента ===
Количество чисел в файле: 12
Минимальный элемент: -50
Максимальный элемент: 100
Максимальный элемент встречается в позициях: 9
```

### Задание 6: Копирование строк
```
=== ЗАДАНИЕ 6: Копирование строк, оканчивающихся на символ '!' ===
Скопирована строка 1: 'дом солнце цветок!'
Скопирована строка 3: 'книга ручка окно!'
==============================================
Обработано строк: 5
Скопировано строк: 2
Результат записан в файл: output.txt
```

---

## Вывод

В ходе выполнения лабораторной работы:

1. **Реализован универсальный класс BinaryProcessor** со статическими методами для работы с файлами
2. **Освоены различные форматы файлов:**
   - Бинарные файлы для числовых данных и структур
   - Текстовые файлы с разной организацией данных
3. **Реализованы 6 различных заданий**, демонстрирующих:
   - Алгоритмическую обработку данных (поиск пар, максимумов, фильтрацию)
   - Работу с разными структурами данных (числа, матрицы, структуры, строки)
   - Эффективное использование STL (векторы, алгоритмы, stringstream)
4. **Обеспечена безопасность и удобство:**
   - Автоматическое добавление расширений файлов
   - Проверка корректности ввода и обработка ошибок
   - Модульная архитектура с четким разделением ответственности
5. **Создан дружественный интерфейс:**
   - Интуитивно понятное меню
   - Подробный вывод результатов
   - Возможность тестирования всех функций
